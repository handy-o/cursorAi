(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5836:(e,t,r)=>{Promise.resolve().then(r.bind(r,5436))},5436:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>C});var s=r(5155),a=r(2115),l=r(2369),n=r(3874);let o="kakaotalk-messages";var i=r(7364),c=r(5288),d=r(4858);function u(e){let{unreadCount:t=3,participantCount:r=2,onBackClick:a,onNotificationClick:l,onMenuClick:n}=e;return(0,s.jsx)("div",{className:"border-b border-neutral-200/50 px-4 py-3",style:{backgroundColor:"#bacee0"},children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("button",{onClick:a,className:"p-1 hover:bg-white/20 rounded-full transition-colors duration-200","aria-label":"뒤로가기",children:(0,s.jsx)(i.A,{className:"w-5 h-5 text-neutral-700"})}),(0,s.jsxs)("div",{className:"flex-1 text-left pl-3",children:[(0,s.jsx)("h1",{className:"text-lg font-medium text-neutral-700 tracking-tight",children:"채팅방"}),(0,s.jsxs)("p",{className:"text-xs text-neutral-600 mt-0.5",children:[r,"명"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("button",{onClick:l,className:"relative p-1 hover:bg-white/20 rounded-full transition-colors duration-200","aria-label":"알림",children:[(0,s.jsx)(c.A,{className:"w-5 h-5 text-neutral-700"}),t>0&&(0,s.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full min-w-[16px] h-4 flex items-center justify-center px-1",children:t>99?"99+":t})]}),(0,s.jsx)("button",{onClick:n,className:"p-1 hover:bg-white/20 rounded-full transition-colors duration-200","aria-label":"메뉴",children:(0,s.jsx)(d.A,{className:"w-5 h-5 text-neutral-700"})})]})]})})}function m(e){let{message:t,formatTime:r,showTime:a=!0}=e;return(0,s.jsx)("div",{className:"flex ".concat(t.isFromUser?"justify-end":"justify-start"," mb-2"),children:(0,s.jsxs)("div",{className:"max-w-[70%] ".concat(t.isFromUser?"order-2":"order-1"),children:[(0,s.jsx)("div",{className:"px-3 py-2 rounded-2xl ".concat(t.isFromUser?"rounded-br-sm shadow-sm":"bg-white border border-neutral-200/60 rounded-bl-sm shadow-sm"),style:{backgroundColor:t.isFromUser?"#ffeb33":"white",color:"#171717"},children:(0,s.jsx)("p",{className:"text-15 whitespace-pre-wrap font-sans text-neutral-700",children:t.content})}),a&&(0,s.jsx)("p",{className:"text-xs text-neutral-500 mt-1 ".concat(t.isFromUser?"text-right":"text-left"),children:r(t.timestamp)})]})})}function x(e){let{date:t}=e;return(0,s.jsx)("div",{className:"flex justify-center my-4",children:(0,s.jsx)("div",{className:"px-3 py-1 rounded-full text-xs font-medium text-date-text",style:{backgroundColor:"#b1c3d5"},children:(0,l.GP)(t,"yyyy년 M월 d일 EEEE",{locale:n.ko})})})}var f=r(6384),h=r(359);function b(e){let{messages:t,formatTime:r}=e,l=(0,a.useRef)(null),n=()=>{var e;null===(e=l.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,a.useEffect)(()=>{n()},[t]);let o=(e,t)=>!(t&&e.isFromUser===t.isFromUser&&(0,f.H)(e.timestamp,t.timestamp));return(0,s.jsx)("div",{className:"flex-1 overflow-y-auto px-4 py-2 message-scroll",style:{backgroundColor:"#bacee0"},children:0===t.length?(0,s.jsx)("div",{className:"flex items-center justify-center h-full text-neutral-500",children:(0,s.jsxs)("p",{className:"text-center",children:["메시지를 입력해보세요!",(0,s.jsx)("br",{}),(0,s.jsx)("span",{className:"text-sm",children:"대화를 시작해보세요."})]})}):(0,s.jsxs)("div",{className:"space-y-1",children:[t.map((e,a)=>{let l=0===a||!(0,h.r)(e.timestamp,t[a-1].timestamp),n=o(e,t[a+1]);return(0,s.jsxs)("div",{children:[l&&(0,s.jsx)(x,{date:e.timestamp}),(0,s.jsx)(m,{message:e,formatTime:r,showTime:n})]},e.id)}),(0,s.jsx)("div",{ref:l})]})})}var p=r(1290),g=r(1027),v=r(3463),j=r(9795);let y=(0,g.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),w=a.forwardRef((e,t)=>{let{className:r,variant:a,size:l,asChild:n=!1,...o}=e,i=n?p.DX:"button";return(0,s.jsx)(i,{className:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,j.QP)((0,v.$)(t))}(y({variant:a,size:l,className:r})),ref:t,...o})});w.displayName="Button";var N=r(8283);function k(e){let{onSendMessage:t}=e,[r,l]=(0,a.useState)(""),n=(0,a.useRef)(null),o=()=>{r.trim()&&(t(r.trim()),l(""))};return(0,a.useEffect)(()=>{let e=n.current;e&&(e.style.height="auto",e.style.height="".concat(Math.min(e.scrollHeight,120),"px"))},[r]),(0,s.jsx)("div",{className:"bg-white/95 backdrop-blur-sm border-t border-neutral-200/50 p-4",children:(0,s.jsxs)("div",{className:"flex items-end gap-2 max-w-4xl mx-auto",children:[(0,s.jsx)("textarea",{ref:n,value:r,onChange:e=>l(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),o())},placeholder:"메시지를 입력하세요 (Shift+Enter로 줄바꿈)",className:"flex-1 px-4 py-3 border border-neutral-200/60 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary/50 resize-none min-h-[40px] max-h-[120px] overflow-y-auto bg-white/80 backdrop-blur-sm text-neutral-700 placeholder:text-neutral-500 font-sans text-15 scrollbar-thin scrollbar-track-transparent scrollbar-thumb-neutral-300 hover:scrollbar-thumb-neutral-400",rows:1}),(0,s.jsx)(w,{onClick:o,disabled:!r.trim(),size:"sm",className:"rounded-full h-10 w-10 disabled:cursor-not-allowed shadow-sm transition-all duration-200 flex items-center justify-center",style:{backgroundColor:r.trim()?"#ffeb33":"#b1c3d5"},"aria-label":"메시지 전송",children:(0,s.jsx)(N.A,{className:"w-4 h-4"})})]})})}function C(){let{messages:e,addMessage:t,formatTime:r}=function(){let[e,t]=(0,a.useState)([]),r=e=>{t(e),localStorage.setItem(o,JSON.stringify(e))};return(0,a.useEffect)(()=>{let e=localStorage.getItem(o);if(e)try{let r=JSON.parse(e).map(e=>({...e,timestamp:new Date(e.timestamp)}));t(r)}catch(e){console.error("Failed to parse stored messages:",e)}else{let e=[{id:"1",content:"안녕하세요! 카카오톡 클론코딩에 오신 것을 환영합니다.",timestamp:new Date(Date.now()-6e4),isFromUser:!1},{id:"2",content:"메시지를 입력하고 전송해보세요!",timestamp:new Date(Date.now()-3e4),isFromUser:!1}];t(e),localStorage.setItem(o,JSON.stringify(e))}},[]),{messages:e,addMessage:function(t){let s=!(arguments.length>1)||void 0===arguments[1]||arguments[1];r([...e,{id:Date.now().toString(),content:t,timestamp:new Date,isFromUser:s}])},formatTime:e=>(0,l.GP)(e,"HH:mm",{locale:n.ko}),clearMessages:()=>{t([]),localStorage.removeItem(o)}}}();return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-neutral-100 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"w-full max-w-lg h-[680px] md:h-[780px] bg-white rounded-3xl md:rounded-2xl shadow-2xl border border-neutral-200/50 overflow-hidden flex flex-col backdrop-blur-sm",children:[(0,s.jsx)(u,{unreadCount:3,participantCount:2,onBackClick:()=>{console.log("채팅 목록으로 이동")},onNotificationClick:()=>{console.log("알림 클릭")},onMenuClick:()=>{console.log("메뉴 클릭")}}),(0,s.jsx)(b,{messages:e,formatTime:r}),(0,s.jsx)(k,{onSendMessage:e=>{t(e,!0)}})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[999,441,517,358],()=>t(5836)),_N_E=e.O()}]);